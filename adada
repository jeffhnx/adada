-- Variables
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

-- Function to make the player invisible
local function makeInvisible()
    -- Loop through all the parts in the character's model
    for _, part in pairs(character:GetDescendants()) do
        -- Check if the part is a BasePart (i.e., a physical part of the character)
        if part:IsA("BasePart") then
            part.Transparency = 1 -- Set transparency to 100% (invisible)
        elseif part:IsA("Decal") or part:IsA("Texture") then
            part.Transparency = 1 -- Set decal or texture transparency to invisible
        end
    end

    -- Disable face if one exists
    local face = character:FindFirstChildWhichIsA("Decal")
    if face then
        face.Transparency = 1
    end
end

-- Function to make the player visible again
local function makeVisible()
    -- Loop through all the parts in the character's model
    for _, part in pairs(character:GetDescendants()) do
        -- Check if the part is a BasePart
        if part:IsA("BasePart") then
            part.Transparency = 0 -- Set transparency back to 0% (fully visible)
        elseif part:IsA("Decal") or part:IsA("Texture") then
            part.Transparency = 0 -- Set decal or texture transparency back to visible
        end
    end

    -- Enable face if one exists
    local face = character:FindFirstChildWhichIsA("Decal")
    if face then
        face.Transparency = 0
    end
end

-- Toggle invisibility on/off with "P"
local isInvisible = false
game:GetService("UserInputService").InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.P then -- "P" key to toggle invisibility
        isInvisible = not isInvisible
        if isInvisible then
            makeInvisible()
        else
            makeVisible()
        end
    end
end)
